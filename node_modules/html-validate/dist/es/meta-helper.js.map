{"version":3,"file":"meta-helper.js","sources":["../../src/meta/define-metadata.ts","../../src/meta/helper.ts"],"sourcesContent":["/**\n * Helper function to assist IDE with completion and type-checking.\n *\n * @public\n */\nexport function defineMetadata(metatable) {\n    return metatable;\n}\n//# sourceMappingURL=define-metadata.js.map","import { naturalJoin } from \"../utils/natural-join\";\n/**\n * @internal\n */\nexport function allowedIfAttributeIsPresent(...attr) {\n    return (node) => {\n        if (attr.some((it) => node.hasAttribute(it))) {\n            return null;\n        }\n        const expected = naturalJoin(attr.map((it) => `\"${it}\"`));\n        return `requires ${expected} attribute to be present`;\n    };\n}\n/**\n * @internal\n */\nexport function allowedIfAttributeIsAbsent(...attr) {\n    return (node) => {\n        const present = attr.filter((it) => node.hasAttribute(it));\n        if (present.length === 0) {\n            return null;\n        }\n        const expected = naturalJoin(present.map((it) => `\"${it}\"`));\n        return `cannot be used at the same time as ${expected}`;\n    };\n}\n/**\n * @internal\n */\nexport function allowedIfAttributeHasValue(key, expectedValue, { defaultValue } = {}) {\n    return (node) => {\n        const attr = node.getAttribute(key);\n        if (attr && typeof attr !== \"string\") {\n            return null;\n        }\n        const actualValue = attr ? attr : defaultValue;\n        if (actualValue && expectedValue.includes(actualValue.toLocaleLowerCase())) {\n            return null;\n        }\n        const expected = naturalJoin(expectedValue.map((it) => `\"${it}\"`));\n        return `\"${key}\" attribute must be ${expected}`;\n    };\n}\n/**\n * @internal\n */\nexport function allowedIfParentIsPresent(...tags) {\n    return (node) => {\n        const match = tags.some((it) => node.closest(it));\n        if (match) {\n            return null;\n        }\n        const expected = naturalJoin(tags.map((it) => `<${it}>`));\n        return `requires ${expected} as parent`;\n    };\n}\n/**\n * @public\n */\nexport const metadataHelper = {\n    allowedIfAttributeIsPresent,\n    allowedIfAttributeIsAbsent,\n    allowedIfAttributeHasValue,\n    allowedIfParentIsPresent,\n};\n//# sourceMappingURL=helper.js.map"],"names":[],"mappings":"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"}