{"version":3,"file":"test-utils.js","sources":["../../src/transform/test-utils.ts"],"sourcesContent":["import fs from \"fs\";\n/**\n * Helper function to call a transformer function in test-cases.\n *\n * @public\n * @param fn - Transformer function to call.\n * @param filename - Filename to read data from. Must be readable.\n * @param chain - If set this function is called when chaining transformers. Default is pass-thru.\n */\nexport function transformFile(fn, filename, chain) {\n    const data = fs.readFileSync(filename, \"utf-8\");\n    const source = {\n        filename,\n        line: 1,\n        column: 1,\n        offset: 0,\n        data,\n    };\n    return transformSource(fn, source, chain);\n}\n/**\n * Helper function to call a transformer function in test-cases.\n *\n * @public\n * @param fn - Transformer function to call.\n * @param data - String to transform.\n * @param chain - If set this function is called when chaining transformers. Default is pass-thru.\n */\nexport function transformString(fn, data, chain) {\n    const source = {\n        filename: \"inline\",\n        line: 1,\n        column: 1,\n        offset: 0,\n        data,\n    };\n    return transformSource(fn, source, chain);\n}\n/**\n * Helper function to call a transformer function in test-cases.\n *\n * @public\n * @param fn - Transformer function to call.\n * @param data - Source to transform.\n * @param chain - If set this function is called when chaining transformers. Default is pass-thru.\n */\nexport function transformSource(fn, source, chain) {\n    const defaultChain = (source) => [source];\n    const context = {\n        hasChain: /* istanbul ignore next */ () => true,\n        chain: chain !== null && chain !== void 0 ? chain : defaultChain,\n    };\n    return Array.from(fn.call(context, source));\n}\n//# sourceMappingURL=test-utils.js.map"],"names":[],"mappings":";;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,aAAa,CAAC,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE;AACnD,IAAI,MAAM,IAAI,GAAG,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACpD,IAAI,MAAM,MAAM,GAAG;AACnB,QAAQ,QAAQ;AAChB,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,MAAM,EAAE,CAAC;AACjB,QAAQ,MAAM,EAAE,CAAC;AACjB,QAAQ,IAAI;AACZ,KAAK,CAAC;AACN,IAAI,OAAO,eAAe,CAAC,EAAE,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAC9C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,eAAe,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE;AACjD,IAAI,MAAM,MAAM,GAAG;AACnB,QAAQ,QAAQ,EAAE,QAAQ;AAC1B,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,MAAM,EAAE,CAAC;AACjB,QAAQ,MAAM,EAAE,CAAC;AACjB,QAAQ,IAAI;AACZ,KAAK,CAAC;AACN,IAAI,OAAO,eAAe,CAAC,EAAE,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAC9C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,eAAe,CAAC,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;AACnD,IAAI,MAAM,YAAY,GAAG,CAAC,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;AAC9C,IAAI,MAAM,OAAO,GAAG;AACpB,QAAQ,QAAQ,6BAA6B,MAAM,IAAI;AACvD,QAAQ,KAAK,EAAE,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,GAAG,YAAY;AACxE,KAAK,CAAC;AACN,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;AAChD;;;;"}